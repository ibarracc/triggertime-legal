import{_ as P,u as M,e as V,f as j,c as n,a as s,t,g as c,b as d,w as i,d as u,F as B,h as E,i as N,A as k,j as _,r as I,o as r}from"./index-CHWeGoxB.js";import{d as w}from"./devices-kLDbnci3.js";import{A}from"./AppCard-DwTApDbO.js";import{A as S}from"./AppBadge-CjISbIUR.js";import{A as F}from"./AppModal-lxvFhGNm.js";import{A as H}from"./AppInput-BQLXc67T.js";const L={class:"dashboard-home"},U={class:"header-section mb-8"},q={class:"mb-2"},z={class:"text-secondary"},T={class:"status-cards-grid mb-8"},G={class:"flex justify-between items-center"},J={key:0,class:"pro-status"},K={key:0,class:"mb-4 text-secondary"},O={key:1,class:"cancel-banner mb-4"},Q={class:"cancel-banner-content"},R={class:"metric-value text-primary mb-6"},W={key:1,class:"free-status"},X={class:"mb-4 text-secondary"},Y={class:"metric-value mb-6"},Z={class:"text-sm text-secondary font-body"},ee={class:"flex justify-between items-center min-w-0"},se={class:"truncate"},te={class:"text-sm text-secondary shrink-0"},ae={key:0,class:"empty-state text-center py-4 text-secondary"},oe={key:1,class:"devices-list flex flex-col gap-3 mb-6"},ne={class:"flex items-center gap-3 min-w-0"},ie={class:"flex-1 min-w-0"},re={class:"font-medium text-sm min-w-0"},de=["onClick","title"],le=["onClick"],ce={class:"text-xs text-secondary truncate"},ue={class:"p-6"},me={class:"flex justify-end gap-3 mt-6"},pe={__name:"DashboardHome",setup(_e){const l=M(),{locale:D}=V(),m=_([]),x=e=>e?new Date(e).toLocaleDateString(D.value,{month:"short",day:"numeric",year:"numeric"}):"";j(async()=>{await l.fetchUser();const e=await w.getDevices();e.success&&(m.value=e.devices)});const p=_(!1),h=_(null),v=_(""),f=_(!1),$=e=>{h.value=e,v.value=e.custom_name||"",p.value=!0},C=async()=>{if(h.value){f.value=!0;try{if((await w.updateDevice(h.value.device_uuid,{custom_name:v.value})).success){const a=await w.getDevices();a.success&&(m.value=a.devices),p.value=!1}}finally{f.value=!1}}};return(e,a)=>{var g;const y=I("router-link");return r(),n("div",L,[s("div",U,[s("h1",q,t(e.$t("dashboard.welcome",{name:((g=c(l).user)==null?void 0:g.first_name)||e.$t("dashboard.shooter_fallback")})),1),s("p",z,t(e.$t("dashboard.dashboard_subtitle")),1)]),s("div",T,[d(A,{hoverable:""},{header:i(()=>[s("div",G,[s("span",null,t(e.$t("nav.subscription")),1),d(S,{variant:c(l).isProPlus?"success":"neutral"},{default:i(()=>[u(t(c(l).isProPlus?e.$t("dashboard.pro_plan"):e.$t("dashboard.free_plan")),1)]),_:1},8,["variant"])])]),default:i(()=>{var o,b;return[c(l).isProPlus?(r(),n("div",J,[(o=c(l).subscription)!=null&&o.cancel_at_period_end?(r(),n("div",O,[a[3]||(a[3]=s("div",{class:"cancel-banner-icon"},"âš ï¸",-1)),s("div",Q,t(e.$t("subscription.ending_soon",{date:(b=c(l).subscription)!=null&&b.current_period_end?x(c(l).subscription.current_period_end):"..."})),1)])):(r(),n("p",K,t(e.$t("dashboard.subscription_status"))+": "+t(e.$t("dashboard.active")),1)),s("div",R,t(e.$t("dashboard.pro_plan")),1),d(y,{to:"/dashboard/subscription",class:"btn btn-secondary w-full"},{default:i(()=>[u(t(e.$t("dashboard.manage_subscription")),1)]),_:1})])):(r(),n("div",W,[s("p",X,t(e.$t("subscription.subtitle")),1),s("div",Y,[a[4]||(a[4]=u("$4.99",-1)),s("span",Z,"/"+t(e.$t("subscription.per_month")),1)]),d(y,{to:"/dashboard/subscription",class:"btn btn-primary w-full"},{default:i(()=>[u(t(e.$t("dashboard.upgrade_pro")),1)]),_:1})]))]}),_:1}),d(A,{hoverable:"",class:"min-w-0"},{header:i(()=>[s("div",ee,[s("span",se,t(e.$t("nav.devices")),1),s("span",te,t(m.value.length),1)])]),default:i(()=>[m.value.length===0?(r(),n("div",ae,t(e.$t("dashboard.no_devices")),1)):(r(),n("div",oe,[(r(!0),n(B,null,E(m.value,o=>(r(),n("div",{key:o.id,class:"device-item flex justify-between items-center p-3 bg-elevated rounded-lg border border-subtle min-w-0"},[s("div",ne,[a[5]||(a[5]=s("span",{class:"device-icon"},"ðŸ“±",-1)),s("div",ie,[s("div",re,[o.custom_name?(r(),n("span",{key:0,class:"cursor-pointer hover:text-primary transition-colors truncate block w-full",onClick:b=>$(o),title:o.custom_name},t(o.custom_name),9,de)):(r(),n("span",{key:1,class:"text-primary cursor-pointer hover:underline text-xs whitespace-nowrap truncate block w-full",onClick:b=>$(o)}," Add custom name ",8,le))]),s("div",ce,t(o.hardware_model||e.$t("common.no_data")),1)])])]))),128))])),d(y,{to:"/dashboard/devices",class:"btn btn-secondary w-full"},{default:i(()=>[u(t(e.$t("dashboard.manage_devices")),1)]),_:1})]),_:1}),d(F,{"is-open":p.value,onClose:a[2]||(a[2]=o=>p.value=!1),title:e.$t("devices.edit_device"),size:"sm"},{default:i(()=>[s("div",ue,[s("form",{onSubmit:N(C,["prevent"])},[d(H,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=o=>v.value=o),label:e.$t("devices.custom_name_label"),placeholder:"My Phone",required:""},null,8,["modelValue","label"]),s("div",me,[d(k,{variant:"secondary",onClick:a[1]||(a[1]=o=>p.value=!1)},{default:i(()=>[u(t(e.$t("common.cancel")),1)]),_:1}),d(k,{type:"submit",loading:f.value},{default:i(()=>[u(t(e.$t("common.save")),1)]),_:1},8,["loading"])])],32)])]),_:1},8,["is-open","title"])])])}}},$e=P(pe,[["__scopeId","data-v-d94e0a32"]]);export{$e as default};
