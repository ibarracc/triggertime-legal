import{a as p}from"./admin-CUXU3qYV.js";import{f as m,c as s,a as e,t as n,l as u,F as v,h as y,j as c,o as a}from"./index-CHWeGoxB.js";const h={class:"admin-subscriptions"},f={key:0,class:"bg-red-500/10 border border-red-500/20 text-red-500 p-4 rounded-xl mb-6"},g={key:1,class:"flex justify-center p-12"},x={key:2,class:"table-card mt-6 mb-6"},b={class:"table-wrapper"},k={class:"admin-table"},D={key:0,class:"font-medium text-sm text-primary"},S={key:0},w={key:1},N={key:1,class:"font-medium text-sm text-primary"},L={class:"text-xs text-secondary opacity-50"},j={class:"text-sm font-mono"},B={class:"badge badge-purple uppercase tracking-wider"},E={key:0,class:"badge badge-green"},F={key:1,class:"badge badge-gray"},I={class:"text-xs tabular-nums text-secondary"},V={key:0},P={__name:"SubscriptionsView",setup(A){const l=c(!0),o=c(""),i=c([]),_=async()=>{var d,r;l.value=!0,o.value="";try{const t=await p.getSubscriptions();t&&(t.success?i.value=t.subscriptions:i.value=t)}catch(t){o.value=((r=(d=t.response)==null?void 0:d.data)==null?void 0:r.message)||"Failed to load subscriptions"}finally{l.value=!1}};return m(()=>{_()}),(d,r)=>(a(),s("div",h,[r[3]||(r[3]=e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold font-heading"},"Subscriptions")],-1)),o.value?(a(),s("div",f,n(o.value),1)):u("",!0),l.value?(a(),s("div",g,[...r[0]||(r[0]=[e("div",{class:"animate-spin h-8 w-8 border-4 border-[var(--primary)] border-t-transparent rounded-full"},null,-1)])])):(a(),s("div",x,[e("div",b,[e("table",k,[r[2]||(r[2]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Stripe Ext ID"),e("th",null,"Plan"),e("th",null,"Status"),e("th",null,"Dates")])],-1)),e("tbody",null,[(a(!0),s(v,null,y(i.value,t=>(a(),s("tr",{key:t.id,class:"hover:bg-white/5 transition-colors group"},[e("td",null,[t.user?(a(),s("div",D,[t.user.first_name||t.user.last_name?(a(),s("span",S,n(t.user.first_name)+" "+n(t.user.last_name),1)):(a(),s("span",w,n(t.user.email),1))])):(a(),s("div",N,"User ID: "+n(t.user_id),1)),e("div",L,n(t.id),1)]),e("td",j,n(t.stripe_subscription_id),1),e("td",null,[e("span",B,n(t.plan),1)]),e("td",null,[t.status==="active"?(a(),s("span",E,n(t.status),1)):(a(),s("span",F,n(t.status),1))]),e("td",I,[e("div",null,"Start: "+n(t.current_period_start?new Date(t.current_period_start).toLocaleDateString():"N/A"),1),e("div",null,"End: "+n(t.current_period_end?new Date(t.current_period_end).toLocaleDateString():t.valid_until?new Date(t.valid_until).toLocaleDateString():"Never"),1)])]))),128)),i.value.length===0?(a(),s("tr",V,[...r[1]||(r[1]=[e("td",{colspan:"5",class:"p-8 text-center text-secondary"},"No subscriptions found.",-1)])])):u("",!0)])])])]))]))}};export{P as default};
