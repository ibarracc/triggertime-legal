import{_ as V,u as $,k,c as g,b as s,w as u,a as l,t as o,l as A,d as i,A as L,i as q,j as d,r as x,m as B,n as C,o as v}from"./index-CHWeGoxB.js";import{A as N}from"./AppCard-DwTApDbO.js";import{A as b}from"./AppInput-BQLXc67T.js";const S={class:"container auth-container"},U={class:"text-center mb-8"},j={class:"mb-2"},I={class:"text-secondary"},M={key:0,class:"error-msg mb-4"},R={class:"flex justify-end mb-4"},T={class:"text-center mt-6 text-sm text-secondary"},D={__name:"LoginView",setup(E){const c=B(),f=C(),m=$(),{setLocale:w}=k(),p=d(""),h=d(""),_=d(!1),n=d(""),y=async()=>{var t;_.value=!0,n.value="";const e=await m.login(p.value,h.value);if(e.success){(t=m.user)!=null&&t.language&&await w(m.user.language);const r=f.query.upgrade_token,a=f.query.redirect;r?c.push(`/checkout/${r}`):a?c.push(a):c.push("/dashboard")}else n.value=e.error,_.value=!1};return(e,t)=>{const r=x("router-link");return v(),g("div",S,[s(N,{class:"auth-card"},{default:u(()=>[l("div",U,[l("h1",j,o(e.$t("auth.login_title")),1),l("p",I,o(e.$t("auth.login_subtitle")),1)]),l("form",{onSubmit:q(y,["prevent"])},[s(b,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),label:e.$t("common.email"),type:"email",placeholder:e.$t("auth.email_placeholder"),required:""},null,8,["modelValue","label","placeholder"]),s(b,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=a=>h.value=a),label:e.$t("common.password"),type:"password",placeholder:e.$t("auth.password_placeholder"),required:""},null,8,["modelValue","label","placeholder"]),n.value?(v(),g("div",M,o(n.value),1)):A("",!0),l("div",R,[s(r,{to:"/forgot-password",class:"text-sm text-primary hover-underline"},{default:u(()=>[i(o(e.$t("auth.forgot_password")),1)]),_:1})]),s(L,{type:"submit",class:"w-full mt-4",loading:_.value},{default:u(()=>[i(o(e.$t("common.login")),1)]),_:1},8,["loading"])],32),l("div",T,[i(o(e.$t("auth.no_account"))+" ",1),s(r,{to:"/register",class:"text-primary hover-underline"},{default:u(()=>[i(o(e.$t("common.register")),1)]),_:1})])]),_:1})])}}},H=V(D,[["__scopeId","data-v-11baec3f"]]);export{H as default};
