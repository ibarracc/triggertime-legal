import{s as f,_ as V,u as D,e as N,c as p,a as e,t,b as $,w as c,g as r,d as l,l as y,x as g,A as P,j as w,o as u}from"./index-CHWeGoxB.js";import{A as S}from"./AppCard-DwTApDbO.js";import{A as j}from"./AppBadge-CjISbIUR.js";const k={createCheckout(_={}){return f.post("/web/subscriptions/checkout",_)},getPortalUrl(){return f.post("/web/subscriptions/portal")}},E={class:"subscription-view"},I={class:"header-section mb-8"},L={class:"mb-2"},U={class:"text-secondary"},M={class:"flex items-center gap-3"},T={class:"plan-details flex justify-between items-center mb-4"},q={class:"flex items-center gap-3 mb-2"},z={class:"m-0"},F={class:"text-secondary m-0"},G={class:"text-right"},H={class:"price font-heading text-2xl font-bold"},J={class:"text-sm text-secondary font-body font-normal"},K={key:0,class:"cancel-banner mb-6"},O={class:"cancel-banner-content"},Q={class:"cancel-banner-title"},R={class:"cancel-banner-desc"},W={key:1,class:"alert alert-danger mb-6"},X={class:"border-t border-subtle pt-6 flex justify-end"},Y={class:"features-list glass-card p-6 rounded-lg"},Z={class:"mb-4"},x={class:"check-list text-secondary"},ss={__name:"SubscriptionView",setup(_){const o=D(),{t:d,locale:C}=N(),i=w(!1),n=w(""),b=s=>s?new Date(s).toLocaleDateString(C.value,{year:"numeric",month:"short",day:"numeric"}):"",A=async()=>{i.value=!0,n.value="";try{const s=await k.getPortalUrl();s.success&&s.url?window.location.href=s.url:n.value=d("common.error")}catch(s){console.error("Portal Error:",s),n.value=d("common.error")}finally{i.value=!1}},B=async()=>{i.value=!0,n.value="";try{const s=await k.createCheckout();s.success&&s.url?window.location.href=s.url:n.value=d("common.error")}catch(s){console.error("Checkout Error:",s),n.value=d("common.error")}finally{i.value=!1}};return(s,a)=>(u(),p("div",E,[e("div",I,[e("h1",L,t(s.$t("nav.subscription")),1),e("p",U,t(s.$t("subscription.subtitle")),1)]),$(S,{class:"mb-8"},{header:c(()=>[e("div",M,[a[0]||(a[0]=e("span",{class:"plan-icon"},"ðŸ’Ž",-1)),l(" "+t(s.$t("subscription.current_plan")),1)])]),default:c(()=>{var m,h,v;return[e("div",T,[e("div",null,[e("div",q,[e("h2",z,t(r(o).isProPlus?"Pro+":s.$t("dashboard.free_plan")),1),$(j,{variant:r(o).isProPlus?"success":"neutral"},{default:c(()=>[l(t(r(o).isProPlus?s.$t("dashboard.active"):s.$t("subscription.current_plan")),1)]),_:1},8,["variant"])]),e("p",F,t(r(o).isProPlus?(m=r(o).subscription)!=null&&m.current_period_end?`${s.$t("subscription.next_billing")}: ${b(r(o).subscription.current_period_end)}.`:`${s.$t("dashboard.subscription_status")}: ${s.$t("dashboard.active")}`:s.$t("subscription.subtitle")),1)]),e("div",G,[e("div",H,[l(t(r(o).isProPlus?"$4.99":"$0.00"),1),e("span",J,"/"+t(s.$t("subscription.per_month")),1)])])]),r(o).isProPlus&&((h=r(o).subscription)!=null&&h.cancel_at_period_end)?(u(),p("div",K,[a[1]||(a[1]=e("div",{class:"cancel-banner-icon"},"âš ï¸",-1)),e("div",O,[e("div",Q,t(s.$t("subscription.canceled_title")),1),e("div",R,t(s.$t("subscription.canceled_desc",{date:(v=r(o).subscription)!=null&&v.current_period_end?b(r(o).subscription.current_period_end):"..."})),1)])])):y("",!0),n.value?(u(),p("div",W,[a[2]||(a[2]=e("span",null,"âŒ",-1)),e("span",null,t(n.value),1)])):y("",!0),e("div",X,[r(o).isProPlus?(u(),g(P,{key:0,variant:"secondary",onClick:A,loading:i.value},{default:c(()=>[l(t(s.$t("subscription.manage_billing")),1)]),_:1},8,["loading"])):(u(),g(P,{key:1,variant:"primary",onClick:B,loading:i.value},{default:c(()=>[l(t(s.$t("subscription.upgrade_now")),1)]),_:1},8,["loading"]))])]}),_:1}),e("div",Y,[e("h3",Z,t(s.$t("subscription.pro_features")),1),e("ul",x,[e("li",null,t(s.$t("subscription.multi_device_sync")),1),e("li",null,t(s.$t("subscription.advanced_analytics")),1),e("li",null,t(s.$t("subscription.priority_support")),1),e("li",null,t(s.$t("subscription.unlimited_sessions")),1)])])]))}},rs=V(ss,[["__scopeId","data-v-3285afe5"]]);export{rs as default};
