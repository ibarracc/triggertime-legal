import{_ as k,c as d,b as t,w,a as u,t as v,A as f,d as g,i as x,l as _,j as o,m as P,n as h,o as i,q as A}from"./index-CHWeGoxB.js";import{A as C}from"./AppCard-DwTApDbO.js";import{A as b}from"./AppInput-BQLXc67T.js";const R={class:"container auth-container"},N={key:0,class:"bg-green-500/10 border border-green-500/20 text-green-400 p-4 rounded-xl mb-6 text-sm text-center"},B={class:"mb-4"},q={key:0,class:"error-msg my-4"},I={__name:"ResetPasswordView",setup(M){P();const y=h(),r=o(""),p=o(""),c=o(!1),s=o(""),m=o(""),V=async()=>{var e,a;if(r.value!==p.value){s.value="Passwords do not match.";return}const l=y.params.token;if(!l){s.value="Invalid or missing reset token.";return}c.value=!0,s.value="";try{const n=await A.resetPassword(l,r.value);n.success?m.value=n.message||"Password has been set.":s.value="Failed to reset password."}catch(n){s.value=((a=(e=n.response)==null?void 0:e.data)==null?void 0:a.message)||"An error occurred. Check if the link expired."}finally{c.value=!1}};return(l,e)=>(i(),d("div",R,[t(C,{class:"auth-card"},{default:w(()=>[e[5]||(e[5]=u("div",{class:"text-center mb-8"},[u("h1",{class:"mb-2"},"New Password"),u("p",{class:"text-secondary"},"Enter your new secure password below.")],-1)),m.value?(i(),d("div",N,[u("p",B,v(m.value),1),t(f,{onClick:e[0]||(e[0]=a=>l.$router.push("/login")),class:"w-full"},{default:w(()=>[...e[3]||(e[3]=[g("Go to Login",-1)])]),_:1})])):(i(),d("form",{key:1,onSubmit:x(V,["prevent"])},[t(b,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),label:"New Password",type:"password",placeholder:"Create a strong password",required:""},null,8,["modelValue"]),t(b,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=a=>p.value=a),label:"Confirm Password",type:"password",placeholder:"Repeat your new password",required:""},null,8,["modelValue"]),s.value?(i(),d("div",q,v(s.value),1)):_("",!0),t(f,{type:"submit",class:"w-full mt-4",loading:c.value},{default:w(()=>[...e[4]||(e[4]=[g(" Reset Password ",-1)])]),_:1},8,["loading"])],32))]),_:1})]))}},U=k(I,[["__scopeId","data-v-e7c46ae0"]]);export{U as default};
